<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>chess.js - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../Gemfile.html">Gemfile</a>
  
    <li><a href="../../Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../Procfile.html">Procfile</a>
  
    <li><a href="../../assets/javascripts/app_js.html">app.js</a>
  
    <li><a href="../../assets/javascripts/application_js.html">application.js</a>
  
    <li><a href="../../assets/javascripts/chess_js.html">chess.js</a>
  
    <li><a href="../../assets/javascripts/lib/chartist_js.html">chartist.js</a>
  
    <li><a href="../../assets/javascripts/lib/jquery_min_js.html">jquery.min.js</a>
  
    <li><a href="../../assets/stylesheets/app_scss.html">app.scss</a>
  
    <li><a href="../../assets/stylesheets/application_css_scss.html">application.css.scss</a>
  
    <li><a href="../../assets/stylesheets/lib/chartist_scss.html">chartist.scss</a>
  
    <li><a href="../../assets/stylesheets/lib/normalize_css.html">normalize.css</a>
  
    <li><a href="../../assets/stylesheets/lib/settings/_chartist-settings_scss.html">_chartist-settings.scss</a>
  
    <li><a href="../../assets/stylesheets/lib/skeleton_css.html">skeleton.css</a>
  
    <li><a href="../../book_json.html">book.json</a>
  
    <li><a href="../../config_ru.html">config.ru</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page assets/javascripts/chess.js">

<p>var FILES = [“a”, “b”, “c”, “d”, “e”, “f”, “g”, “h”]; var RANKS = [“8”,
“7”, “6”, “5”, “4”, “3”, “2”, “1”]; var PLIES = [&#39;1&#39;, &#39;2&#39;,
&#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;,
&#39;8&#39;, &#39;9&#39;, &#39;10&#39;, &#39;11&#39;, &#39;12&#39;,
&#39;13&#39;, &#39;14&#39;, &#39;15&#39;, &#39;16&#39;]; var WHITE = 0; var
BLACK = 1;</p>

<p>adjustSquares = function() {</p>

<pre>var w = $(&quot;#board&quot;).width() / 8;
$(&quot;td&quot;).width(w);
$(&quot;td&quot;).height(w);
$(&quot;td&quot;).css(&#39;font-size&#39;, w * 0.6);</pre>

<p>}</p>

<p>showNodeDistribution = function(data) {</p>

<pre class="ruby"><span class="ruby-identifier">new</span> <span class="ruby-constant">Chartist</span>.<span class="ruby-constant">Line</span>(<span class="ruby-string">&#39;.ct-chart&#39;</span>, {
  <span class="ruby-identifier">labels</span><span class="ruby-operator">:</span> <span class="ruby-constant">PLIES</span>,
  <span class="ruby-identifier">series</span><span class="ruby-operator">:</span> <span class="ruby-identifier">data</span>
}, {
  <span class="ruby-identifier">fullWidth</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>,
  <span class="ruby-identifier">chartPadding</span><span class="ruby-operator">:</span> {
    <span class="ruby-identifier">right</span><span class="ruby-operator">:</span> <span class="ruby-value">40</span>
  }
});
</pre>

<p>}</p>

<p>init = function() {</p>

<pre>resetBoard();
$.ajax({
  type: &#39;get&#39;,
  url: &#39;/show&#39;,
  success: function(resp) {
    console.log(resp);
    debugger
    updateBoard(JSON.parse(resp));
  }
});</pre>

<p>}</p>

<p>resetBoard = function() {</p>

<pre>var clr = &#39;white&#39;;
var str = &quot;&quot;;
for (var i = 0; i &lt; 8; i++) {
  str += &quot;&lt;tr&gt;&quot;;
  for (var j = 0; j &lt; 8; j++) {
    str += &#39;&lt;td class=\&quot;&#39; + clr + &#39;\&quot; data-id=\&quot;&#39; + FILES[j] + RANKS[i] + &#39;\&quot;&gt;&lt;/td&gt;&#39;;
    if (clr === &#39;white&#39;) {
      clr = &#39;black&#39;;
    } else {
      clr = &#39;white&#39;;
    }
  }
  if (clr === &#39;white&#39;) {
    clr = &#39;black&#39;;
  } else {
    clr = &#39;white&#39;;
  }
  str += &quot;&lt;/tr&gt;&quot;;
}
$(&quot;#board&quot;).html(str);
adjustSquares();</pre>

<p>}</p>

<p>updateBoard = function(resp) {</p>

<pre>console.log(resp);
var pieces = resp.pieces;
var report = resp.report;
var npp = resp.npp;
var nppp = resp.npp_percent;
$(&quot;#npp&quot;).html(&quot;&quot;);
for (var i = 0; i &lt; 16; i++) {
  var prcnt = nppp[i];
  $(&quot;#npp&quot;).append(&#39;&lt;span&gt;&lt;strong&gt;&#39; + i + &#39;&lt;/strong&gt; &#39; + Math.round(prcnt) + &#39;%  &#39; + npp[i] +
    &#39;&lt;/span&gt;&#39;);
}

$(&quot;#fen&quot;).html(resp.fen);
$(&quot;#report&quot;).html(&quot;&quot;);
for (var key in resp.report) {
  var val = resp.report[key];
  $(&quot;#report&quot;).append(&#39;&lt;div class=&quot;card&quot;&gt;&lt;h5&gt;&#39; + val.toString() + &#39;&lt;/h5&gt;&lt;span&gt;&#39; + key.toString() + &#39;&lt;/span&gt;&lt;/div&gt;&#39;);
}

for (var i = 0; i &lt; pieces.length; i++) {
  var $sq = $(&#39;td[data-id=&quot;&#39; + pieces[i].square + &#39;&quot;]&#39;);
  $sq.text(pieces[i].piece);
  $sq.data(&#39;moves&#39;, pieces[i].moves);
}
adjustSquares();</pre>

<p>}</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

